datasource db {
  provider = "postgresql"
  url = env("POSTGRES_PRISMA_URL") // uses connection pooling
  directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
  shadowDatabaseUrl = env("POSTGRES_URL_NON_POOLING") // used for migrations
}

generator client {
  provider = "prisma-client-js"
}

model Student {
  id        Int    @id @default(autoincrement())
  sid       String @unique
  phoneNumber String? @unique
  name      String
  password  String
  token     String? 
  gender    String? 
  collegeId String @default("00")
  courses   Course[]
  otp       OTP?
}

model OTP {
  id        Int @id @default(autoincrement())
  value     String? 
  expiresIn DateTime
  student   Student?   @relation(fields: [phoneNumber], references: [phoneNumber], onDelete: Cascade)
  phoneNumber String  @unique
}

model TempOtp {
  id Int @id @default(autoincrement())
  value String
  expiresIn DateTime
  phoneNumber String @unique
}

model Course {
  id     Int     @id @default(autoincrement())
  courseId String
  student   Student    @relation(fields: [sid], references: [sid], onDelete: Cascade)
  sid String
}